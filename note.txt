模式总结

1. 简单模式
    一个生产者，一个消费者，不需要设定交换机（使用默认的交换机）
2. 工作队列模式
    一个生产者，多个消费者（竞争关系），不需要设定交换机（使用默认的交换机）
3. 发布/订阅模式
    需要设定为 fanout(广播) 模式的交换机，并且交换机和队列需要进行绑定，当消息发送到交换机后，交换机将消息发送到所有绑定的队列。
4. 路由模式
    需要设定为 direct 模式的交换机，交换机和队列需要进行绑定，并且指定 routingKey, 当消息发送到交换机后，交换机会根据 routingKey 将消息发送到指定的队列。
5. 通配符模式
    需要设定类型为 topic 模式的交换机，交换机和队列需要进行绑定，并且指定通配符方式的 routingKey， 当发送消息到交换机时，交换机会根据 通配符routingKey 将消息发送到匹配的队列。

RabbitMQ 高级

1. 过期时间TTL
    过期时间 TTL 表示可以对消息设置预期时间，在这个时间内都可以被消费者获取接收，过了时间之后将被自动删除。
    RabbitMQ 可以对 消息 和 队列 设置TTL。目前有两种方法
        ① 设定队列属性，队列中所有的消息都有相同的过期时间。
        ② 对消息进行单独设置，每条消息的TTL可以不同
    如果上述两种方法同时使用，则过期时间以TTL较小的数值为准。消息在队列的生存时间一旦超过TTL，就成dead message，被投递到死信队列，消费者将无法在收到该消息

2. 死信队列DLX
    全称为Dead-Letter-Exchange，可以称之为死信交换机，也有人称之为私信邮箱。当一个消息在一个队列中变成死信队列的之后，它能被重新发送到另一个交换机中，这个交换机就是DLX，绑定DLX的队列就成为死信队列。
    消息变成死信的原因：
        ①消息被拒绝
        ②消息过期
        ③队列达到最大长度
    DLX也是一个正常的交换机，和一般的交换机没有区别，他能在任何的队列上被指定，实际上就是设定某一个队列的属性。
    当这个队列中存在死信是，RabbitMQ就会自动将这个消息重新发布到设置的DLX上去，进而被路由到另一个队列，即死信队列。
    要想使用死信队列，只需要在定义队列的时候设置队列参数 x-dead-letter-exchange 指定交换机即可。

3. 延迟队列
    延迟队列存储的对象是对应的延迟消息，所谓“延迟消息”是指，当消息被发送以后，并不想让消费者立刻拿到消息，而是等待特定时间之后，消费者才能拿到这个消息进行消费。
    RabbitMQ 中的延迟队列可以通过 过期时间+死信队列 实现。

    应用场景：
        ①在电商项目的支付场景；如果用户在下单后几十分钟内没有支付成功；那么这个支付的订单算作支付失败，要进行支付失败的异常处理（将库存加回去），这时需要延迟队列来处理。
        ②在系统中如果有需要指定在某个时间之后执行的任务，也可以使用延迟队列来处理。
